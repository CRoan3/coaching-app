<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="create-acc-style.css">
    <title>Create an Account</title>
</head>
<body>
    <H1 title="app-title"><a href="index.html">Fitness App</H1></a>
    <div class="form-container">
        <H2>Account Creation:</H2>
        <form id="create-acc-form" background="midnightblue" action="http://localhost:3000/register" method="POST">
            <label class="input-label" for="new-first-name">Enter your first name:
                <input type="text" id="new-first-name" name="fname" placeholder="First name..." required>
            </label>
            <label class="input-label" for="new-last-name">Enter your last name:
                <input type="text" id="new-last-name" name="lname" placeholder="Last name..." required>
            </label>
            <label for="new-user-sex">Select sex:   
                <select id="new-user-sex" name="gender" required>
                 <option>(select one)</option>
                 <option>Male</option>
                 <option>Female</option>
                 <option>Non-binary or intersex</option>
               </select>
            </label>
            <label id="new-age-label" for="new-user-age">Input your age (years):
                <input id="new-user-age" type="number" name="age" min="18" max="120" pattern="[0-9]" placeholder="Age..." required/>
            </label>
            <label for="new-username-training-status">Select training status:   
                <select id="new-username-training-status" name="ts">
                    <option>(select one)</option>
                    <option>Beginner (<1 year)</option>
                    <option>Intermediate (1-3 years)
                    </option>
                    <option>Advanced (>3 years)</option>
                    </select>
            </label>
            <label id="new-email-label" for="new-email">Enter Your Email Address:
                <input type="email" id="new-email" name="email" placeholder="Email address..."required autocomplete="new-email"/>
            </label>  
            <label id="new-username-label" for="new-username">Enter desired username:
                <input type="text" id="new-username" name="username" placeholder="Username:" autocomplete="username">
            </label>
            <label for="new_password">Enter desired password
                <input type="password" id="new_password" name="psw" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="Must contain at least one number, one uppercase letter, one lowercase letter, and be at least 8 or more characters" required placeholder="Enter password..." autocomplete="new-password">
            </label>
            <label for="new_password2">Re-enter desired password
                <input type="password" id="new_password2" name="psw2" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="Must contain at least one number, one uppercase letter, one lowercase letter, and be at least 8 or more characters" placeholder="Re-enter password..." required autocomplete="new-password">
            </label>
                <div id="message">
                    <h3>Password must contain the following:</h3>
                    <p id="letter" class="invalid">A lowercase letter</p>
                    <p id="capital" class="invalid">A capital (uppercase) letter</p>
                    <p id="number" class="invalid">A number</p>
                    <p id="length" class="invalid">Minimum 8 characters</p>
                    <p id="pw-match" class="invalid">Passwords match</p>
                  </div>
            <button type="submit">Submit</button>
            <input type="file" id="profile-pic">
        </form>
        

    </div>
<script>
var myInput = document.getElementById("new-password");
var myInput2 = document.getElementById("new-password2");
var letter = document.getElementById("letter");
var capital = document.getElementById("capital");
var number = document.getElementById("number");
var length = document.getElementById("length");
var pwMatch = document.getElementById("pw-match")

// When the user clicks on the password field, show the message box  

    myInput.onfocus = function() {
        document.getElementById("message").style.display = "block";
    }

    myInput2.onfocus = function() {
        document.getElementById("message").style.display = "block";
    }

/* // When the user clicks outside of the password field, hide the message box
    myInput.onblur = function() {
        document.getElementById("message").style.display = "none";
    }

    myInput2.onblur = function() {
        document.getElementById("message").style.display = "none";
    } */

    // When the user starts to type something inside the first password field
    myInput.onkeyup = function() {
    // Validate capital letters
    var lowerCaseLetters = /[a-z]/g; 
        if(myInput.value.match(lowerCaseLetters)) {
        letter.classList.remove("invalid");
        letter.classList.add("valid");
        } else {
        letter.classList.remove("valid");
        letter.classList.add("invalid");
    }

    // Validate capital letters
    var upperCaseLetters = /[A-Z]/g;
    if(myInput.value.match(upperCaseLetters)) {
      capital.classList.remove("invalid");
      capital.classList.add("valid");
    } else {
      capital.classList.remove("valid");
      capital.classList.add("invalid");
    }

    // Validate numbers
    var numbers = /[0-9]/g;
    if(myInput.value.match(numbers)) {
      number.classList.remove("invalid");
      number.classList.add("valid");
    } else {
      number.classList.remove("valid");
      number.classList.add("invalid");
    }

    // Validate length
    if(myInput.value.length >= 8) {
      length.classList.remove("invalid");
      length.classList.add("valid");
    } else {
      length.classList.remove("valid");
      length.classList.add("invalid");
    }
    
    //Validate pw match
    if(myInput.value == myInput2.value) {
      pwMatch.classList.remove("invalid");
      pwMatch.classList.add("valid");
    } else {
      pwMatch.classList.remove("valid");
      pwMatch.classList.add("invalid");
    } 
  }
// When the user starts to type something inside the second password field
  myInput2.onkeyup = function() {
    // Validate lowercase letters
    var lowerCaseLetters = /[a-z]/g;
    if(myInput2.value.match(lowerCaseLetters)) {
      letter.classList.remove("invalid");
      letter.classList.add("valid");
    } else {
      letter.classList.remove("valid");
      letter.classList.add("invalid");
  }

    // Validate capital letters
    var upperCaseLetters = /[A-Z]/g;
    if(myInput2.value.match(upperCaseLetters)) {
      capital.classList.remove("invalid");
      capital.classList.add("valid");
    } else {
      capital.classList.remove("valid");
      capital.classList.add("invalid");
    }

    // Validate numbers
    var numbers = /[0-9]/g;
    if(myInput2.value.match(numbers)) {
      number.classList.remove("invalid");
      number.classList.add("valid");
    } else {
      number.classList.remove("valid");
      number.classList.add("invalid");
    }

    // Validate length
    if(myInput2.value.length >= 8) {
      length.classList.remove("invalid");
      length.classList.add("valid");
    } else {
      length.classList.remove("valid");
      length.classList.add("invalid");
    }

    //Validate pw match
    if(myInput.value == myInput2.value) {
      pwMatch.classList.remove("invalid");
      pwMatch.classList.add("valid");
    } else {
      pwMatch.classList.remove("valid");
      pwMatch.classList.add("invalid");
    } 
  }

</script>
</body>
</html>